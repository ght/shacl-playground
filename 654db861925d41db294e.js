(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{395:function(t,e,r){"use strict";function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(e),r.d(e,"ZeroMd",(function(){return o}));class o extends HTMLElement{get src(){return this.getAttribute("src")}set src(t){this.reflect("src",t)}get manualRender(){return this.hasAttribute("manual-render")}set manualRender(t){this.reflect("manual-render",t)}reflect(t,e){!1===e?this.removeAttribute(t):this.setAttribute(t,!0===e?"":e)}static get observedAttributes(){return["src"]}attributeChangedCallback(t,e,r){"src"===t&&this.connected&&!this.manualRender&&r!==e&&this.render()}constructor(t){super(),this.version="$VERSION",this.config=i(i({markedUrl:"https://cdn.jsdelivr.net/gh/markedjs/marked@1/marked.min.js",prismUrl:[["https://cdn.jsdelivr.net/gh/PrismJS/prism@1/prism.min.js","data-manual"],"https://cdn.jsdelivr.net/gh/PrismJS/prism@1/plugins/autoloader/prism-autoloader.min.js"],cssUrls:["https://cdn.jsdelivr.net/gh/sindresorhus/github-markdown-css@4/github-markdown.min.css","https://cdn.jsdelivr.net/gh/PrismJS/prism@1/themes/prism.min.css"],hostCss:":host{display:block;position:relative;contain:content;}:host([hidden]){display:none;}"},t),window.ZeroMdConfig),this.root=this.hasAttribute("no-shadow")?this:this.attachShadow({mode:"open"}),this.constructor.ready||(this.constructor.ready=Promise.all([!!window.marked||this.loadScript(this.config.markedUrl),!!window.Prism||this.loadScript(this.config.prismUrl)])),this.clicked=this.clicked.bind(this),this.manualRender||this.render().then(()=>setTimeout(()=>this.goto(location.hash),250))}connectedCallback(){this.connected=!0,this.fire("zero-md-connected",{},{bubbles:!1,composed:!1}),this.waitForReady().then(()=>{this.fire("zero-md-ready")}),this.shadowRoot&&this.shadowRoot.addEventListener("click",this.clicked)}disconnectedCallback(){this.connected=!1,this.shadowRoot&&this.shadowRoot.removeEventListener("click",this.clicked)}waitForReady(){const t=this.connected||new Promise(t=>{this.addEventListener("zero-md-connected",(function e(){this.removeEventListener("zero-md-connected",e),t()}))});return Promise.all([this.constructor.ready,t])}fire(t,e={},r={bubbles:!0,composed:!0}){e.msg&&console.warn(e.msg),this.dispatchEvent(new CustomEvent(t,i({detail:i({node:this},e)},r)))}tick(){return new Promise(t=>requestAnimationFrame(t))}arrify(t){return t?Array.isArray(t)?t:[t]:[]}onload(t){return new Promise((e,r)=>{t.onload=e,t.onerror=t=>r(t.path?t.path[0]:t.composedPath()[0])})}loadScript(t){return t=this.arrify(t),Promise.all(t.map(t=>{const[e,...r]=this.arrify(t),s=document.createElement("script");return s.src=e,s.async=!1,r.forEach(t=>s.setAttribute(t,"")),this.onload(document.head.appendChild(s))}))}goto(t){if(t){const e=this.root.getElementById(t.substring(1));e&&e.scrollIntoView()}}clicked(t){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey||t.defaultPrevented)return;const e=t.target.closest("a");e&&e.hash&&e.host===location.host&&e.pathname===location.pathname&&this.goto(e.hash)}clearDom(){this.root.querySelectorAll("[class^=markdown]").forEach(t=>t.remove())}makeFrag(t){const e=document.createElement("template");return e.innerHTML=t,e.content}dedent(t){const e=(t=t.replace(/^\n/,"")).match(/^\s+/);return e?t.replace(new RegExp("^"+e[0],"gm"),""):t}getBaseUrl(t){const e=document.createElement("a");return e.href=t,e.href.substring(0,e.href.lastIndexOf("/")+1)}highlight(t){t.querySelectorAll('pre>code:not([class*="language-"])').forEach(t=>{const e=t.innerText.match(/^\s*</)?"markup":t.innerText.match(/^\s*(\$|#)/)?"bash":"js";t.classList.add("language-"+e)}),window.Prism.highlightAllUnder(t)}buildStyles(){const t=t=>{const e=this.querySelector(t);return e?e.innerHTML||" ":""},e=this.arrify(this.config.cssUrls),r=`<div class="markdown-styles"><style>${this.config.hostCss}</style>${t('template[data-merge="prepend"]')}${t("template:not([data-merge])")||e.reduce((t,e)=>`${t}<link rel="stylesheet" href="${e}">`,"")}${t('template[data-merge="append"]')}</div>`;return this.makeFrag(r)}async buildMd(t={}){const e=`<div class="markdown-body${t.classes?this.arrify(t.classes).reduce((t,e)=>`${t} ${e}`," "):""}">${await(async()=>{if(!this.src)return"";const e=await fetch(this.src);if(e.ok){const r=await e.text();return window.marked(r,i({baseUrl:this.getBaseUrl(this.src)},t))}return this.fire("zero-md-error",{msg:`[zero-md] HTTP error ${e.status} while fetching src`,status:e.status,src:this.src}),""})()||(()=>{const e=this.querySelector('script[type="text/markdown"]');if(!e)return"";const r=e.hasAttribute("data-dedent")?this.dedent(e.text):e.text;return window.marked(r,t)})()}</div>`,r=this.makeFrag(e);return this.highlight(r.firstElementChild),r}async stampDom(t){const e=[...t.querySelectorAll('link[rel="stylesheet"]')];this.root.appendChild(t.firstElementChild),await Promise.all(e.map(t=>this.onload(t))).catch(t=>{this.fire("zero-md-error",{msg:"[zero-md] An external stylesheet failed to load",status:void 0,src:t.href})})}async render(t={}){await this.waitForReady(),this.clearDom();const e=this.buildStyles(),r=this.buildMd(t);await this.stampDom(e),await this.tick(),await this.stampDom(await r),this.fire("zero-md-rendered")}}customElements.define("zero-md",o)}}]);
//# sourceMappingURL=654db861925d41db294e.js.map